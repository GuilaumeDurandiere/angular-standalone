<div class="background" *ngIf="step$ | async as step">
    <form [formGroup]="substepForm">  
        <p class="subtitle" i18n="@@SUBSTEP_INFO">Informations sous-étapes</p>
        <div
            class="substep-container p-3 mb-2"
        >
            <div class="d-flex justify-content-between">
                <p class="substep-name" i18n="@@SUBSTEP">Sous-étape</p>
            </div>
            <app-add-substep-form formControlName="sousEtape" [nameRequired]="true"></app-add-substep-form>
        </div>   
        <div class="d-flex justify-content-between">
            <button
                pButton
                pRipple
                i18n-label="@@CANCEL"
                label="Annuler"
                icon="pi pi-times"
                class="cancel-button"
                (click)="closeDialog()"
            ></button>
            @if (substep.id === 0) {
                <button
                    pButton
                    pRipple
                    [disabled]="substepForm.invalid"
                    i18n-label="@@ADD_THE_SUBSTEP"
                    label="Ajouter la sous-étape"
                    icon="pi pi-plus-circle"
                    class="generic-button"
                    (click)="onCreateSubmit(substepForm, step.id)"
                ></button>
            } @else {
                <button
                    pButton
                    pRipple
                    [disabled]="substepForm.invalid"
                    i18n-label="@@SAVE_STEP"
                    label="Enregistrer les modifications"
                    icon="pi pi-save"
                    class="generic-button"
                    (click)="onUpdateSubmit(substepForm)"
                ></button>
            }
        </div>
    </form>
</div>